<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Text drop shadow</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/4.2.0/fabric.js"></script>
  </head>
  <body>
    <div style="margin-left: 15px; margin-bottom: 10px">
      <p>Distance <input value="20" id="distance" type="text" /></p>
      <p>Degree <input value="45" id="degree" type="text" /></p>
      <button onclick="render()">Calc</button>
    </div>
    <canvas
      id="c"
      width="800"
      height="400"
      style="border: 1px solid #000000"
    ></canvas>
    <script>
      function degreesToRadians(degrees) {
        const pi = Math.PI;
        return degrees * (pi / 180);
      }

      function calc() {
        let distance = document.getElementById("distance").value;
        let degree = document.getElementById("degree").value;
        console.log("distance", distance, "degree", degree);

        let x = distance * Math.cos(degreesToRadians(degree));
        let y = distance * Math.sin(degreesToRadians(degree));
        return { x, y };
      }

      function render() {
        // Do some initializing stuff
        fabric.Object.prototype.set({
          transparentCorners: false,
          cornerColor: "rgba(102,153,255,0.5)",
          cornerSize: 12,
          padding: 5,
        });

        // initialize fabric canvas and assign to global windows object for debug
        var canvas = (window._canvas = new fabric.Canvas("c"));

        var rect = new fabric.Rect({
          left: 300,
          top: 150,
          width: 150,
          height: 150,
          fill: "#29477F",
        });

        // setShadow with string notation
        rect.set(
          "shadow",
          new fabric.Shadow({
            color: "red",
            blur: 0,
            offsetX: calc().x,
            offsetY: calc().y,
          })
        );

        var normalText = new fabric.Text("I'm a normal text", {
          fontWeight: "normal",
          left: 100,
          top: 50,
        });

        normalText.set(
          "shadow",
          new fabric.Shadow({
            color: "red",
            blur: 0,
            offsetX: calc().x,
            offsetY: calc().y,
          })
        );

        canvas.add(rect, normalText);

        canvas.renderAll();
      }
    </script>
  </body>
</html>
